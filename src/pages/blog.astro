---
// import { fetchBlogs } from "../../public/scripts/blog";

type BlogProps = {
  tags: string[];
  created_at: string;
  heading: string;
  body: string;
  hero_image: string;
  author: string;
};

// const blogs = await fetchBlogs();
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog Page</title>

    <link rel="stylesheet" href="/styles/global.css" />
  </head>

  <body>
    <nav class="flex justify-between p-8">
      <img src="Logo.png" alt="potential logo" class="w-8 h-8" />

      <div class="flex gap-5">
        <button class="font-CentraNo2-Book">
          <a href="/newpost">New Post</a></button
        >
        <button class="font-CentraNo2-Book text-blue-600"
          ><a href="/blog">Blog Posts</a></button
        >
        <button class="font-CentraNo2-Book">
          <a href="/account">My Account</a>
        </button>
      </div>
    </nav>

    <div
      class="w-full h-[150px] bg-yellow-200 flex justify-center items-center"
    >
      <h1 class="text-8xl font-RecklessNeueRegular text-center">Our blog</h1>
    </div>
    <ul class="" id="blogs"></ul>

    <!-- The fetchBlogs function imported at the frontmatter relies on the Supabase client, which is designed to run in the browser. However, Astro's server-side rendering environment cannot handle browser-specific libraries like supabase-js out of the box. -->
    <!-- {
      blogs && blogs?.length > 0 ? (
        <ul>
          {blogs.map((blog: BlogProps, index: number) => (
            <li class="flex">
              <div class="w-[50%]">
                <img
                  src={blog?.hero_image}
                  alt="image of nature"
                  class="object-cover w-full h-full"
                />
              </div>

              <div class="p-20 bg-[#FAF8F1] w-[50%]">
                <div class="flex gap-1">
                  {blog?.tags?.map((tag, index) => (
                    <p class="bg-black text-white rounded-2xl px-5 py-1 flex justify-center font-CentraNo2-Light text-[12px]">
                      {tag}
                    </p>
                  ))}
                </div>

                <div class="mt-20 w-[70%]">
                  <p class="font-RecklessNeueThin text-5xl">{blog?.heading}</p>
                  <p class="font-CentraNo2-Light text-[12px] mt-4">
                    {blog?.created_at}
                  </p>
                </div>

                <div class="mt-12 w-[70%]">
                  <p class="font-CentraNo2-Light">
                    {blog?.body.substring(0, 100)}â€¦
                  </p>
                  <button class="font-CentraNo2-Book mt-2">
                    {" "}
                    <a href={`/blog/${blog.heading}`}>Read More</a>{" "}
                  </button>
                </div>
              </div>
            </li>
          ))}
        </ul>
      ) : (
        <p class="text-center mt-6">No blog posts found.</p>
      )
    } -->

    <script type="module" src="/scripts/blog.js" is:inline></script>
  </body>
</html>
